"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[999,680],{9545:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(6252),o=a(3577);const r={class:"dialogHeader"},s=["id"],i={class:"transfer"},n={class:"buttons"};function d(e,t,a,d,m,u){const p=(0,l.up)("el-button"),c=(0,l.up)("el-transfer"),h=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(p,{type:"primary",onClick:t[0]||(t[0]=e=>m.shown=!0),class:"buttons"},{default:(0,l.w5)((()=>[(0,l.Uk)("추가")])),_:1}),(0,l.Wm)(h,{modelValue:m.shown,"onUpdate:modelValue":t[2]||(t[2]=e=>m.shown=e),"show-close":!1},{header:(0,l.w5)((({titleId:e,titleClass:t})=>[(0,l._)("div",r,[(0,l._)("h2",{id:e,class:(0,o.C_)(t)},"참여인원",10,s)])])),default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l.Wm)(c,{modelValue:m.member,"onUpdate:modelValue":t[1]||(t[1]=e=>m.member=e),data:u.MemberTable,titles:["직원","참가인원"],"filter-placeholder":"직원 검색",filterable:""},null,8,["modelValue","data"])]),(0,l._)("div",n,[(0,l.Wm)(p,{type:"primary",onClick:u.Confirm},{default:(0,l.w5)((()=>[(0,l.Uk)("확인")])),_:1},8,["onClick"]),(0,l.Wm)(p,{type:"primary",onClick:u.debug},{default:(0,l.w5)((()=>[(0,l.Uk)("디버그")])),_:1},8,["onClick"]),(0,l.Wm)(p,{type:"warning",onClick:u.notSave},{default:(0,l.w5)((()=>[(0,l.Uk)("취소")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])],64)}var m=a(443),u={name:"addMember",emits:["savePart"],methods:{Confirm(){this.member=this.member.map((e=>{const t=this.MemberList.List[e];return{name:t.name,job:t.job,rank:t.rank}})),this.$emit("savePart",this.member),this.shown=!1},notSave(){this.member=this.parentData,this.shown=!1},debug(){console.log(this.member),console.log(this.parentData),console.log(this.MemberTable)}},data(){return{shown:!1,MemberList:m.r,member:[]}},props:{parentData:{type:Array,default:()=>[]}},computed:{MemberTable(){return this.MemberList.List.map(((e,t)=>({key:t,label:`${e.name}(${e.job})`})))}},watch:{parentData:{handler:function(e){const t=e.map((e=>m.r.findIndexByRankName(e.rank,e.name)));JSON.stringify(t)!==JSON.stringify(this.member)&&(this.member=t)},deep:!0}}},p=a(3744);const c=(0,p.Z)(u,[["render",d],["__scopeId","data-v-48f2e405"]]);var h=c},3396:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var l=a(6252),o=a(9963),r=a(3577);const s={class:"buttons"},i={key:0},n={key:1},d={key:0},m={key:1},u={key:0},p={key:1},c={key:0},h={key:1};function w(e,t,a,w,f,k){const b=(0,l.up)("el-button"),g=(0,l.up)("el-tooltip"),v=(0,l.up)("Delete"),W=(0,l.up)("el-icon"),D=(0,l.up)("el-table-column"),y=(0,l.up)("el-option"),_=(0,l.up)("el-select"),V=(0,l.up)("el-input"),C=(0,l.up)("el-date-picker"),P=(0,l.up)("el-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",s,[(0,l.wy)((0,l.Wm)(b,{type:"primary",onClick:k.editClick},{default:(0,l.w5)((()=>[(0,l.Uk)("수정")])),_:1},8,["onClick"]),[[o.F8,!f.Status]]),(0,l.Wm)(g,{placement:"left",content:"모든 정보가 채워지면 저장이 가능합니다."},{default:(0,l.w5)((()=>[(0,l.wy)((0,l.Wm)(b,{type:"primary",onClick:k.saveWork,disabled:!k.AllDataFinished},{default:(0,l.w5)((()=>[(0,l.Uk)("저장")])),_:1},8,["onClick","disabled"]),[[o.F8,f.Status]])])),_:1}),(0,l.wy)((0,l.Wm)(b,{type:"primary",onClick:k.addRow},{default:(0,l.w5)((()=>[(0,l.Uk)("추가")])),_:1},8,["onClick"]),[[o.F8,f.Status]]),(0,l.wy)((0,l.Wm)(b,{type:"primary",onClick:k.clearData},{default:(0,l.w5)((()=>[(0,l.Uk)("초기화")])),_:1},8,["onClick"]),[[o.F8,f.Status]])]),(0,l.Wm)(P,{data:f.workData,border:""},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{width:"60",label:"삭제"},{default:(0,l.w5)((e=>[(0,l.Wm)(b,{type:"danger",onClick:t=>k.deleteRow(e.row),circle:""},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(v)])),_:1})])),_:2},1032,["onClick"])])),_:1}),(0,l.Wm)(D,{label:"담당자",props:"name"},{default:(0,l.w5)((e=>[f.Status?((0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(_,{placeholder:"담당자",modelValue:e.row.name,"onUpdate:modelValue":t=>e.row.name=t},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.Parti,(e=>((0,l.wg)(),(0,l.j4)(y,{key:e.name,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])):((0,l.wg)(),(0,l.iD)("div",n,(0,r.zw)(e.row.name),1))])),_:1}),(0,l.Wm)(D,{label:"업무",props:"position"},{default:(0,l.w5)((e=>[f.Status?((0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(_,{placeholder:"업무",modelValue:e.row.position,"onUpdate:modelValue":t=>e.row.position=t},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.JobList.List,(e=>((0,l.wg)(),(0,l.j4)(y,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])):((0,l.wg)(),(0,l.iD)("div",m,(0,r.zw)(e.row.position),1))])),_:1}),(0,l.Wm)(D,{prop:"desc",label:"업무내용"},{default:(0,l.w5)((e=>[f.Status?((0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(V,{modelValue:e.row.desc,"onUpdate:modelValue":t=>e.row.desc=t,type:"textarea",placeholder:"간단하게 작성해주세요",autosize:""},null,8,["modelValue","onUpdate:modelValue"])])):((0,l.wg)(),(0,l.iD)("div",p,(0,r.zw)(e.row.desc),1))])),_:1}),(0,l.Wm)(D,{prop:"deadLine",label:"마감일"},{default:(0,l.w5)((e=>[f.Status?((0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(C,{modelValue:e.row.deadLine,"onUpdate:modelValue":t=>e.row.deadLine=t,type:"date",placeholder:"마감일","disabled-date":k.disabledTime,"value-format":"YYYY-MM-DD",format:"YYYY/MM/DD","default-value":new Date(k.defaultDate)},null,8,["modelValue","onUpdate:modelValue","disabled-date","default-value"])])):((0,l.wg)(),(0,l.iD)("div",h,(0,r.zw)(e.row.deadLine),1))])),_:1})])),_:1},8,["data"])],64)}a(7658);var f=(0,l.aZ)({name:"Delete"});const k={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},b=(0,l.Wm)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1);function g(e,t,a,o,r,s){return(0,l.wg)(),(0,l.j4)("svg",k,[b])}f.render=g,f.__file="packages/components/Delete.vue";var v=f,W=a(381),D=a.n(W),y=a(9760),_={name:"ShowAllocate",emits:["saveWorks","commitEdit"],components:{Delete:v},data(){return{workData:[],Status:!0,JobList:y.n}},props:{Parti:{type:Array,default:()=>[{name:"김철수"},{name:"박영희"}]},parentDate:{type:Object,default:()=>({date1:["2021-08-01","2021-08-11"]})},parentWork:{type:Array,default:()=>[]}},methods:{addRow(){this.workData.push({name:"",position:"",desc:"",deadLine:"",status:"진행중"})},saveWork(){console.log(this.workData),this.$emit("saveWorks",this.workData),this.$emit("commitEdit",!0),this.Status=!this.Status},editClick(){this.$emit("commitEdit",!1),this.Status=!this.Status,console.log(this.Status)},deleteRow(e){const t=this.workData.indexOf(e);-1!==t&&this.workData.splice(t,1)},dataInit(){if(0===this.workData.length){const e=this.Parti.map((e=>({name:e.name,position:"",desc:"",deadLine:"",status:"진행중"})));this.workData=e}else console.log(this.parentWork),this.workData=this.parentWork},clearData(){this.workData=[],this.$message({type:"success",message:"초기화 되었습니다."})}},computed:{TimeLines(){return this.parentDate},disabledTime(){const e=D()(this.TimeLines[0]),t=D()(this.TimeLines[1]);return a=>a<e||a>t},defaultDate(){const e=D()(this.TimeLines[0]);return e},AllDataFinished(){if(0===this.workData.length)return!1;const e=this.workData,t=e=>e.some((e=>""===e.name.trim()||""===e.position.trim()||""===e.desc.trim()||""===e.deadLine.trim()));return!t(e)}},mounted(){this.dataInit()}},V=a(3744);const C=(0,V.Z)(_,[["render",w],["__scopeId","data-v-bcbeca9e"]]);var P=C},7999:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var l=a(6252);const o=e=>((0,l.dD)("data-v-1718f0ba"),e=e(),(0,l.Cn)(),e),r=o((()=>(0,l._)("div",null," 업무 할당을 시작하기 위해선 모든 정보를 입력해야 하고, 해당 정보를 다시 입력하기 위해선 업무 할당을 초기화해야 합니다 ",-1))),s={class:"center"},i={key:1},n=o((()=>(0,l._)("h4",null," 최소 프로젝트 참가 인원 전원이 1개 이상의 업무가 할당되어야 합니다. 수정 후 저장 버튼을 누르면 계획안을 제출 할 수 있습니다. ",-1))),d={class:"center"};function m(e,t,a,o,m,u){const p=(0,l.up)("el-input"),c=(0,l.up)("el-form-item"),h=(0,l.up)("el-divider"),w=(0,l.up)("el-date-picker"),f=(0,l.up)("addMemberV2"),k=(0,l.up)("showMemberV2"),b=(0,l.up)("el-alert"),g=(0,l.up)("el-button"),v=(0,l.up)("AllocateWorkV2"),W=(0,l.up)("el-form");return(0,l.wg)(),(0,l.j4)(W,{model:o.form,"label-width":"120px","label-position":"left","status-icon":"",rules:m.rules},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{label:"제목",prop:"title"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{modelValue:o.form.title,"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.title=e),disabled:m.PassWork},null,8,["modelValue","disabled"])])),_:1}),(0,l.Wm)(h),(0,l.Wm)(c,{label:"진행 날짜",prop:"date1"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{modelValue:o.form.date1,"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.date1=e),type:"daterange","range-separator":"~","start-placeholder":"Start date","end-placeholder":"End date","value-format":"YYYY-MM-DD",format:"YYYY/MM/DD",clearable:!m.PassWork,disabled:m.PassWork},null,8,["modelValue","clearable","disabled"])])),_:1}),(0,l.Wm)(h),(0,l.Wm)(c,{label:"내용",prop:"desc"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{modelValue:o.form.desc,"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.desc=e),type:"textarea",disabled:m.PassWork,autosize:""},null,8,["modelValue","disabled"])])),_:1}),(0,l.Wm)(h),(0,l.Wm)(c,{label:"참가 인원",prop:"Partipacants"},{default:(0,l.w5)((()=>[m.PassWork?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(f,{key:0,onSavePart:u.savePart,parentData:o.form.Partipacants},null,8,["onSavePart","parentData"])),(0,l.Wm)(k,{parentData:o.form.Partipacants},null,8,["parentData"])])),_:1}),m.PassWork?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(b,{key:0,type:"warning","show-icon":"",closable:!1},{default:(0,l.w5)((()=>[r])),_:1})),(0,l._)("div",s,[m.PassWork?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(c,{key:0},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{type:"primary",onClick:u.openWork},{default:(0,l.w5)((()=>[(0,l.Uk)("업무 할당하기")])),_:1},8,["onClick"])])),_:1}))]),m.PassWork?((0,l.wg)(),(0,l.iD)("div",i,[u.AllDataSaved?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(b,{key:0,type:"warning","show-icon":"",closable:!1},{default:(0,l.w5)((()=>[n])),_:1})),(0,l.Wm)(c,{label:"업무 할당"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{Parti:o.form.Partipacants,onSaveWorks:u.saveWork,parentDate:o.form.date1,onCommitEdit:u.changeCommit,parentWork:u.findWorks},null,8,["Parti","onSaveWorks","parentDate","onCommitEdit","parentWork"])])),_:1}),(0,l.Wm)(h),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l._)("div",d,[(0,l.Wm)(g,{type:"primary",onClick:u.onSubmit,disabled:!u.AllDataSaved},{default:(0,l.w5)((()=>[(0,l.Uk)("완성")])),_:1},8,["onClick","disabled"]),(0,l.Wm)(g,{type:"warning",onClick:u.cancelAllocate},{default:(0,l.w5)((()=>[(0,l.Uk)("할당 취소")])),_:1},8,["onClick"])])])),_:1})])):(0,l.kq)("",!0)])),_:1},8,["model","rules"])}var u=a(9545),p=a(5680),c=a(3396),h=a(5086),w=a(844),f=a(381),k=a.n(f),b=a(2616),g=a(2262),v={name:"createPlan",components:{addMemberV2:u["default"],showMemberV2:p["default"],AllocateWorkV2:c["default"]},emits:["savePlan"],props:{projectData:{type:Object,default:()=>{}}},data(){return{ApprovalList:b.e,rules:{title:[{required:!0,message:"프로젝트 제목을 작성해주세요",trigger:"blur"}],date1:[{required:!0,message:"프로젝트 기간을 입력해주세요",trigger:"change"}],desc:[{required:!0,message:"설명을 입력해주세요",trigger:"blur"}]},projectPlanList:h.b,PassWork:!1,Committed:!1}},computed:{AllDataSaved(){return this.form.works.length>=this.form.Partipacants.length&&this.Committed},hasInput(){return this.projectData!==this.form&&void 0!==this.projectData&&null!==this.projectData},originalTitle(){return this.projectData.title},findWorks(){const e=this.projectData.index,t=this.projectPlanList.workList.find((t=>t.parentIdx===e));return t.works}},methods:{onSubmit(){this.$message({type:"success",message:"프로젝트 수정 계획안이 작성되었습니다. 승인이 끝나면 프로젝트가 시작됩니다."}),console.log("submit!"),console.log(this.form),this.form.update=k()().format("YYYY-MM-DD");const e={...this.form,originalTitle:this.originalTitle};this.ApprovalList.request(e,"계획","수정"),console.log(this.projectPlanList.List),this.$emit("savePlan")},savePart(e){this.form.Partipacants=e},saveWork(e){this.form.works=e,console.log("saveWork!",e,this.form.works)},openWork(){""!=this.form.title&&this.form.date1!=[]&&this.form.Partipacants!=[]?(this.$message({type:"info",message:"업무 할당을 시작합니다"}),this.PassWork=!0):this.$message({type:"warning",message:"프로젝트 정보가 모두 작성되여야 합니다"})},cancelAllocate(){w.T.confirm("업무 할당을 취소하고 기본 정보 작성으로 돌아갑니다. 계속하시겠습니까?","경고",{confirmButtonText:"확인",cancelButtonText:"취소",type:"warning"}).then((()=>{this.PassWork=!1,this.form.works=[],this.$message({type:"info",message:"업무 할당이 취소되었습니다"})})).catch((()=>{this.$message({type:"info",message:"업무 할당을 계속합니다"})}))},changeCommit(e){this.Committed=e}},setup(e){const t=(0,g.iH)({title:"",date1:[],works:[],desc:"",Partipacants:[],update:"",originalTitle:""});return(0,l.YP)((()=>e.projectData),(e=>{e&&Object.assign(t.value,e)}),{immediate:!0}),{form:t}}},W=a(3744);const D=(0,W.Z)(v,[["render",m],["__scopeId","data-v-1718f0ba"]]);var y=D},5680:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var l=a(6252);function o(e,t,a,o,r,s){const i=(0,l.up)("el-table-column"),n=(0,l.up)("el-table");return(0,l.wg)(),(0,l.j4)(n,{data:a.parentData,border:"",onSelectionChange:s.handleSelect,"table-layout":r.tableLayout},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{prop:"name",label:"Name"}),(0,l.Wm)(i,{prop:"job",label:"Job"}),(0,l.Wm)(i,{prop:"rank",label:"Rank"})])),_:1},8,["data","onSelectionChange","table-layout"])}var r=a(443),s={name:"projectPlan",props:{parentData:{type:Array,default:()=>[]}},data(){return{currentProject:null,tableData:[],MemberList:r.r,tableLayout:"auto"}},methods:{handleSelect(e){this.selectedRow=e}}},i=a(3744);const n=(0,i.Z)(s,[["render",o]]);var d=n}}]);
//# sourceMappingURL=999.3037baea.js.map