"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[225,744,787,615,680,596],{4301:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var l=a(3396),o=a(7139);const n={class:"dialogHeader"},r=["id"],s={class:"card-header"};function c(e,t,a,c,i,d){const p=(0,l.up)("el-button"),u=(0,l.up)("showMemberV2"),m=(0,l.up)("ShowAllocate"),h=(0,l.up)("el-date-picker"),f=(0,l.up)("el-card"),g=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[c.isCollapse?((0,l.wg)(),(0,l.j4)(p,{key:0,type:"primary",plain:"",onClick:d.openDialog},{default:(0,l.w5)((()=>[(0,l.Uk)("...")])),_:1},8,["onClick"])):((0,l.wg)(),(0,l.j4)(p,{key:1,type:"primary",plain:"",onClick:d.openDialog},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(d.form.title),1)])),_:1},8,["onClick"])),(0,l.Wm)(g,{modelValue:i.test,"onUpdate:modelValue":t[1]||(t[1]=e=>i.test=e),"append-to-body":""},{header:(0,l.w5)((({titleId:e,titleClass:t})=>[(0,l._)("div",n,[(0,l._)("h2",{id:e,class:(0,o.C_)(t)},(0,o.zw)(d.form.title),11,r)])])),default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.form,((e,a,n)=>((0,l.wg)(),(0,l.j4)(f,{border:"",key:n,class:"card"},{header:(0,l.w5)((()=>[(0,l._)("div",s,(0,o.zw)(i.translateKey[a]),1)])),default:(0,l.w5)((()=>[Array.isArray(e)&&"date1"!==a?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},["Partipacants"===a?((0,l.wg)(),(0,l.j4)(u,{key:0,parentData:e},null,8,["parentData"])):((0,l.wg)(),(0,l.j4)(m,{key:1,project:d.form},null,8,["project"]))],64)):"date1"===a?((0,l.wg)(),(0,l.j4)(h,{key:1,modelValue:d.form.date1,"onUpdate:modelValue":t[0]||(t[0]=e=>d.form.date1=e),type:"daterange","range-separator":"~","start-placeholder":"Start date","end-placeholder":"End date",readonly:""},null,8,["modelValue"])):((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[(0,l.Uk)((0,o.zw)(e),1)],64))])),_:2},1024)))),128))])),_:1},8,["modelValue"])],64)}var i=a(2616),d=a(5086),p=a(970),u=a(5680),m=a(2750),h={name:"DocumentedProject",components:{showMemberV2:u["default"],ShowAllocate:m["default"]},setup(){const{type:e}=(0,p.Z)(),t=(0,l.Fl)((()=>"sm"===e.value));return{isCollapse:t}},data(){return{test:!1,Hello:"Hello",ApprovalList:i.e,data:{title:"",date1:[],works:[],desc:"",Partipacants:[],update:""},translateKey:{title:"제목",date1:"진행 날짜",works:"업무",desc:"내용",Partipacants:"참가 인원",update:"날짜 업데이트",type:"종류",status:"결재 상태",writer:"작성자",master:"결재자"}}},props:{project:{type:Object,default:()=>{}}},methods:{openDialog(){this.test=!0,console.log(this.project,"project"),console.log(this.form,"form")}},computed:{form(){try{let e;if(this.project&&this.project.type)e="수정"===this.project.status?this.project:i.e.findList(this.project.title),console.log(e);else if(this.project&&this.project.title){let{work:t,project:a}=d.b.findWorkAndProject(this.project.title);e={...a,works:t},delete e.index,console.log(e)}return e}catch(e){return console.log(e),this.data}}},watch:{project:{handler(){console.log(this.project,"project")}}}},f=a(89);const g=(0,f.Z)(h,[["render",c],["__scopeId","data-v-7cf8bf35"]]);var w=g},7331:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var l=a(3396),o=a(7139);const n=e=>((0,l.dD)("data-v-1e132a60"),e=e(),(0,l.Cn)(),e),r={class:"card-header"},s={class:"circleBox"},c={class:"percentage-value"},i=n((()=>(0,l._)("span",{class:"percentage-label"},"기한",-1))),d={class:"percentage-value"},p=n((()=>(0,l._)("span",{class:"percentage-label"},"진행도",-1))),u={class:"percentage-value"},m=n((()=>(0,l._)("span",{class:"percentage-label"},"승인",-1))),h={key:0},f=n((()=>(0,l._)("span",{class:"title"},"기간",-1))),g={class:"descBox"},w=n((()=>(0,l._)("span",{class:"title"},"설명",-1))),j={class:"descBox"},y=n((()=>(0,l._)("span",{class:"title"},"참가 인원",-1))),k={class:"card-footer"};function b(e,t,a,n,b,_){const C=(0,l.up)("el-button"),P=(0,l.up)("el-progress"),v=(0,l.up)("el-divider"),W=(0,l.up)("ShowAllocate"),D=(0,l.up)("el-card");return(0,l.wg)(),(0,l.j4)(D,{class:"card",shadow:"always"},{header:(0,l.w5)((()=>[(0,l._)("div",r,[(0,l._)("span",null,(0,o.zw)(a.project.title),1),b.detailed?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(C,{key:0,type:"primary",onClick:_.detailClick},{default:(0,l.w5)((()=>[(0,l.Uk)("상세")])),_:1},8,["onClick"])),b.detailed?((0,l.wg)(),(0,l.j4)(C,{key:1,type:"primary",onClick:_.detailClick},{default:(0,l.w5)((()=>[(0,l.Uk)("축소")])),_:1},8,["onClick"])):(0,l.kq)("",!0)])])),default:(0,l.w5)((()=>[(0,l._)("div",s,[(0,l.Wm)(P,{percentage:_.remainingTime,type:"circle",color:b.customColors},{default:(0,l.w5)((({percentage:e})=>[(0,l._)("span",c,(0,o.zw)(e)+"%",1),i])),_:1},8,["percentage","color"]),(0,l.Wm)(P,{percentage:_.progress,type:"circle"},{default:(0,l.w5)((({percentage:e})=>[(0,l._)("span",d,(0,o.zw)(e)+"%",1),p])),_:1},8,["percentage"]),(0,l.Wm)(P,{percentage:80,type:"circle"},{default:(0,l.w5)((({percentage:e})=>[(0,l._)("span",u,(0,o.zw)(e)+"%",1),m])),_:1})]),b.detailed?((0,l.wg)(),(0,l.iD)("div",h,[(0,l.Wm)(v),(0,l._)("div",null,[f,(0,l._)("p",g,[(0,l.Uk)((0,o.zw)(_.startTime)+" ~ "+(0,o.zw)(_.endTime)+" ",1),(0,l.Wm)(v)])]),(0,l._)("div",null,[w,(0,l._)("p",j,(0,o.zw)(_.description),1)]),y,(0,l.Wm)(W,{project:a.project,onGoing:!0},null,8,["project"])])):(0,l.kq)("",!0),(0,l._)("div",k,[(0,l._)("span",null,"마지막 업데이트: "+(0,o.zw)(a.project.update),1)])])),_:1})}var _=a(5086),C=a(2750),P=a(6797),v=a.n(P),W={name:"projectOngoingCard",components:{ShowAllocate:C["default"]},props:{project:{type:Object,required:!0,default:()=>({title:"",date1:"",desc:"",participants:[],works:[],update:"",index:""})}},data(){return{projectPlanList:_.b,customColors:[{percentage:50,color:"rgb(255, 194, 0)"},{percentage:70,color:"rgb(255, 133, 0)"},{percentage:90,color:"#f56c6c"}],detailed:!1}},computed:{startTime(){return this.project.date1[0]},endTime(){return this.project.date1[1]},currentTime(){return v()().format("YYYY-MM-DD")},remainingTime(){const e=v()(this.startTime),t=v()(this.endTime),a=v()(this.currentTime);return a.diff(e,"days")<0?0:Math.round(a.diff(e,"days")/t.diff(e,"days")*100)},progress(){const e=_.b.callWorkList(this.project).works,t=e.filter((e=>"완료"===e.status));return Math.round(t.length/e.length*100)},description(){return this.project.desc}},methods:{detailClick(){this.detailed=!this.detailed}}},D=a(89);const T=(0,D.Z)(W,[["render",b],["__scopeId","data-v-1e132a60"]]);var L=T},7156:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var l=a(3396);function o(e,t,a,o,n,r){const s=(0,l.up)("projectOngoingCard"),c=(0,l.up)("el-empty"),i=(0,l.up)("el-tab-pane"),d=(0,l.up)("showPlan"),p=(0,l.up)("el-tabs");return(0,l.wg)(),(0,l.j4)(p,{type:"border-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{label:"진행중"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.calledList,(e=>((0,l.wg)(),(0,l.j4)(s,{key:e.title,project:e},null,8,["project"])))),128)),0===r.calledList.length?((0,l.wg)(),(0,l.j4)(c,{key:0,description:"진행중인 프로젝트가 없습니다."})):(0,l.kq)("",!0)])),_:1}),(0,l.Wm)(i,{label:"대기중"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{projectPlan:"진행"})])),_:1})])),_:1})}var n=a(7331),r=a(5086),s=a(8068),c={name:"projectOngoing",components:{projectOngoingCard:n["default"],showPlan:s["default"]},data(){return{devTest:0,projectPlanList:r.b}},computed:{calledList(){return this.projectPlanList.callList()}}},i=a(89);const d=(0,i.Z)(c,[["render",o]]);var p=d},5680:function(e,t,a){a.r(t),a.d(t,{default:function(){return i}});var l=a(3396);function o(e,t,a,o,n,r){const s=(0,l.up)("el-table-column"),c=(0,l.up)("el-table");return(0,l.wg)(),(0,l.j4)(c,{data:a.parentData,border:"",onSelectionChange:r.handleSelect,"table-layout":n.tableLayout},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{prop:"name",label:"Name"}),(0,l.Wm)(s,{prop:"job",label:"Job"}),(0,l.Wm)(s,{prop:"rank",label:"Rank"})])),_:1},8,["data","onSelectionChange","table-layout"])}var n=a(443),r={name:"projectPlan",props:{parentData:{type:Array,default:()=>[]}},data(){return{currentProject:null,tableData:[],MemberList:n.r,tableLayout:"auto"}},methods:{handleSelect(e){this.selectedRow=e}}},s=a(89);const c=(0,s.Z)(r,[["render",o]]);var i=c},8068:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var l=a(3396);const o={key:0,class:"buttons"};function n(e,t,a,n,r,s){const c=(0,l.up)("el-button"),i=(0,l.up)("el-tooltip"),d=(0,l.up)("el-table-column"),p=(0,l.up)("DocumentedProjectV2"),u=(0,l.up)("el-table");return(0,l.wg)(),(0,l.iD)(l.HY,null,["예정"===a.projectPlan?((0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(c,{type:"primary",onClick:s.createPlan},{default:(0,l.w5)((()=>[(0,l.Uk)("생성")])),_:1},8,["onClick"]),(0,l.Wm)(i,{disabled:!s.multiCheck,content:s.modifyButton,placement:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{type:"warning",disabled:s.multiCheck,onClick:s.modifyPlan},{default:(0,l.w5)((()=>[(0,l.Uk)("수정")])),_:1},8,["disabled","onClick"])])),_:1},8,["disabled","content"]),(0,l.Wm)(i,{disabled:!s.onGoingCheck,content:"이미 진행중인 프로젝트의 삭제는 불가능합니다. 삭제를 원할 시 관리자에게 연락해주세요",placement:"top"},{default:(0,l.w5)((()=>[(0,l.Wm)(c,{type:"danger",disabled:s.onGoingCheck,onClick:s.deletePlan},{default:(0,l.w5)((()=>[(0,l.Uk)("삭제")])),_:1},8,["disabled","onClick"])])),_:1},8,["disabled"])])):(0,l.kq)("",!0),(0,l.Wm)(u,{data:s.PlanList,border:"",style:{width:"100%"},onSelectionChange:s.handleSelect},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"selection",width:"55"}),(0,l.Wm)(d,{prop:"title",label:"제목"},{default:(0,l.w5)((e=>[(0,l.Wm)(p,{project:e.row},null,8,["project"])])),_:1}),(0,l.Wm)(d,{prop:"desc",label:"설명"}),(0,l.Wm)(d,{prop:"member",label:"참가인원","show-overflow-tooltip":""}),(0,l.Wm)(d,{prop:"status",label:"상태"}),(0,l.Wm)(d,{prop:"startDate",label:"시작일"})])),_:1},8,["data","onSelectionChange"])],64)}var r=a(5086),s=a(6797),c=a.n(s),i=a(6e3),d=a(4301),p={name:"projectPlan",emits:["createPlan","modifyPlan","deletePlan"],components:{DocumentedProjectV2:d["default"]},props:{projectPlan:{type:String,default:"예정",validator:e=>["예정","진행","완료"].includes(e)}},data(){return{currentProject:null,tableData:[],projectPlanList:r.b,selectedRow:[],modifyToolTip:["이미 진행중인 프로젝트는 수정할 수 없습니다. 수정이 필요하면 관리자에게 연락해주세요","2개 이상의 프로젝트를 선택하면 수정 할 수 없습니다","이미 진행중인 프로젝트는 수정할 수 없습니다, 수정은 1개의 프로젝트만 선택해야합니다"]}},computed:{PlanList(){const e=this.projectPlanList.callPlanList(),t=e.filter((e=>{const t=c()(e.date1[0]),a=c()(),l=a.diff(t,"days"),o="완료"===e.status?"완료":l<0?"진행예정":e.status;return("완료"!==this.projectPlan||"완료"===o)&&("진행"!==this.projectPlan||"진행예정"===o)}));return t.map((e=>{const t=e.Partipacants.map((e=>e.name)).join(", "),a=c()(e.date1[0]),l=c()(),o=l.diff(a,"days"),n="완료"===e.status?"완료":o<0?"진행예정":e.status;return{title:e.title,desc:e.desc,member:t,status:n,startDate:e.date1[0]}}))},multiCheck(){return this.onGoingCheck||this.selectedRow.length>1},onGoingCheck(){return this.selectedRow.some((e=>"진행예정"!==e.status))&&this.selectedRow.length>0},modifyButton(){return this.selectedRow.length>1&&this.onGoingCheck?this.modifyToolTip[2]:this.selectedRow.length>1?this.modifyToolTip[1]:this.onGoingCheck?this.modifyToolTip[0]:"완료"}},methods:{createPlan(){this.$emit("createPlan")},handleSelect(e){this.selectedRow=e},modifyPlan(){this.$emit("modifyPlan",this.selectedRow[0])},deletePlan(){i.T.confirm("선택된 프로젝트 계획들을 취소하시겠습니까?","경고",{confirmButtonText:"승인",cancelButtonText:"취소",type:"warning"}).then((()=>{for(const e of this.selectedRow){console.log(e);const t=this.projectPlanList.List.find((t=>t.title===e.title));console.log(t),this.projectPlanList.deletePlanWork(t)}this.$message({type:"success",message:"취소되었습니다"})})).catch((()=>this.$message({type:"info",message:"취소되었습니다"})))}}},u=a(89);const m=(0,u.Z)(p,[["render",n],["__scopeId","data-v-02bc7f14"]]);var h=m}}]);
//# sourceMappingURL=225.f7be3345.js.map