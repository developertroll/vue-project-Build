"use strict";(self["webpackChunkvue_project"]=self["webpackChunkvue_project"]||[]).push([[952,545],{952:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var s=a(6252);const r=(0,s._)("div",null,"자기 자신에게 보내는 메일은 자동으로 제외됩니다.",-1),n={class:"center"};function l(e,t,a,l,o,m){const i=(0,s.up)("addMemberV2"),u=(0,s.up)("el-input"),d=(0,s.up)("el-form-item"),p=(0,s.up)("el-alert"),c=(0,s.up)("el-button"),h=(0,s.up)("el-form");return(0,s.wg)(),(0,s.j4)(h,{model:o.messageData,"label-width":"120px","label-position":"left"},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{label:"받는 사람",prop:"to"},{default:(0,s.w5)((()=>[m.checkReply?((0,s.wg)(),(0,s.j4)(i,{key:0,parentData:o.messageData.to,onSavePart:m.savePart},null,8,["parentData","onSavePart"])):(0,s.kq)("",!0),(0,s.Wm)(u,{modelValue:o.messageData.to,"onUpdate:modelValue":t[0]||(t[0]=e=>o.messageData.to=e),disabled:"",formatter:m.formatTo},null,8,["modelValue","formatter"])])),_:1}),(0,s.Wm)(p,{type:"info","show-icon":"",closable:!1},{default:(0,s.w5)((()=>[r])),_:1}),(0,s.Wm)(d,{label:"제목",prop:"title"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{modelValue:o.messageData.title,"onUpdate:modelValue":t[1]||(t[1]=e=>o.messageData.title=e)},null,8,["modelValue"])])),_:1}),(0,s.Wm)(d,{label:"내용"},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{type:"textarea",modelValue:o.messageData.content,"onUpdate:modelValue":t[2]||(t[2]=e=>o.messageData.content=e),autosize:""},null,8,["modelValue"])])),_:1}),(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s.Wm)(c,{type:"primary",onClick:m.onSubmit},{default:(0,s.w5)((()=>[(0,s.Uk)("보내기")])),_:1},8,["onClick"]),(0,s.Wm)(c,{type:"warning",onClick:t[3]||(t[3]=t=>e.$emit("cancel"))},{default:(0,s.w5)((()=>[(0,s.Uk)("취소")])),_:1})])])),_:1})])),_:1},8,["model"])}a(7658);var o=a(9545),m=a(443),i={name:"messageCU",components:{addMemberV2:o["default"]},emits:["saveMessage"],props:{replyData:{type:Object,default:()=>({from:"",content:"",to:[],title:""})}},data(){return{messageData:{from:m.r.currentMember,to:[],content:"",title:""}}},computed:{arrangeTo(){return this.messageData.to.join(", ")},currentTo(){return void 0===this.replyData.to&&""===this.messageData.to?[]:void 0===this.replyData.to?this.messageData.to:this.replyData.to},checkReply(){return 0===Object.keys(this.replyData).length}},methods:{savePart(e){this.messageData.to=e},onSubmit(){this.messageData.to=this.messageData.to.filter((e=>e.name!==m.r.currentMember)),this.messageData.content=this.preserveWhitespace(this.messageData.content),this.$emit("saveMessage",this.messageData)},formatTo(){return Array.isArray(this.messageData.to)?this.messageData.to.map((e=>e.name)).join(", "):""},preserveWhitespace(e){return e.replace(/\n/g,"<br>").replace(/ /g,"&nbsp;")},unpreserveWhitespace(e){return e.replace(/<br>/g,"\n").replace(/&nbsp;/g," ")}},watch:{replyData:{immediate:!0,handler:function(e){0!==Object.keys(e).length&&(this.messageData.to.push(m.r.findMemberByName(e.from)),this.messageData.title=`RE: ${e.title}`,this.messageData.content=`\n\n ------------------ \n\n받는사람:${e.to.name}(${e.to.rank})\n보낸사람:${e.from}\n내용:${this.unpreserveWhitespace(e.content)}`)},deep:!0}}},u=a(3744);const d=(0,u.Z)(i,[["render",l]]);var p=d},9545:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var s=a(6252),r=a(3577);const n={class:"dialogHeader"},l=["id"],o={class:"transfer"},m={class:"buttons"};function i(e,t,a,i,u,d){const p=(0,s.up)("el-button"),c=(0,s.up)("el-transfer"),h=(0,s.up)("el-dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(p,{type:"primary",onClick:t[0]||(t[0]=e=>u.shown=!0),class:"buttons"},{default:(0,s.w5)((()=>[(0,s.Uk)("추가")])),_:1}),(0,s.Wm)(h,{modelValue:u.shown,"onUpdate:modelValue":t[2]||(t[2]=e=>u.shown=e),"show-close":!1},{header:(0,s.w5)((({titleId:e,titleClass:t})=>[(0,s._)("div",n,[(0,s._)("h2",{id:e,class:(0,r.C_)(t)},"참여인원",10,l)])])),default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s.Wm)(c,{modelValue:u.member,"onUpdate:modelValue":t[1]||(t[1]=e=>u.member=e),data:d.MemberTable,titles:["직원","참가인원"],"filter-placeholder":"직원 검색",filterable:""},null,8,["modelValue","data"])]),(0,s._)("div",m,[(0,s.Wm)(p,{type:"primary",onClick:d.Confirm},{default:(0,s.w5)((()=>[(0,s.Uk)("확인")])),_:1},8,["onClick"]),(0,s.Wm)(p,{type:"primary",onClick:d.debug},{default:(0,s.w5)((()=>[(0,s.Uk)("디버그")])),_:1},8,["onClick"]),(0,s.Wm)(p,{type:"warning",onClick:d.notSave},{default:(0,s.w5)((()=>[(0,s.Uk)("취소")])),_:1},8,["onClick"])])])),_:1},8,["modelValue"])],64)}var u=a(443),d={name:"addMember",emits:["savePart"],methods:{Confirm(){this.member=this.member.map((e=>{const t=this.MemberList.List[e];return{name:t.name,job:t.job,rank:t.rank}})),this.$emit("savePart",this.member),this.shown=!1},notSave(){this.member=this.parentData,this.shown=!1},debug(){console.log(this.member),console.log(this.parentData),console.log(this.MemberTable)}},data(){return{shown:!1,MemberList:u.r,member:[]}},props:{parentData:{type:Array,default:()=>[]}},computed:{MemberTable(){return this.MemberList.List.map(((e,t)=>({key:t,label:`${e.name}(${e.job})`})))}},watch:{parentData:{handler:function(e){const t=e.map((e=>u.r.findIndexByRankName(e.rank,e.name)));JSON.stringify(t)!==JSON.stringify(this.member)&&(this.member=t)},deep:!0}}},p=a(3744);const c=(0,p.Z)(d,[["render",i],["__scopeId","data-v-48f2e405"]]);var h=c}}]);
//# sourceMappingURL=952.42ee2e4c.js.map